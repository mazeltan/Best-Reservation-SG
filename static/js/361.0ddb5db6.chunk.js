"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[361],{67361:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var t=r(72791),a=r(70885),s=r(16030),i=r(43504),o=r(16871),c=r(47022),d=r(43360),l=r(97907),u=r.n(l),h=r(15861),p=r(87757),v=r.n(p),x=r(74569),j=r.n(x),f=r(21030),m=r(1413),Z=r(95316),k=r(46654),g=r(80184);var w=function(e){var n=e.reservation,r=e.setEditLinkModal,i=e.setPasswordChange,o=(0,s.I0)(),c=(0,t.useState)(""),l=(0,a.Z)(c,2),u=l[0],p=l[1];return(0,g.jsxs)(Z.Z,(0,m.Z)((0,m.Z)({},e),{},{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(Z.Z.Header,{closeButton:!0,children:(0,g.jsx)(Z.Z.Title,{id:"contained-modal-title-vcenter",children:"Reservation Link"})}),(0,g.jsx)(Z.Z.Body,{children:(0,g.jsxs)(k.Z,{children:[(0,g.jsxs)(k.Z.Group,{classname:"mb-3",children:[(0,g.jsx)(k.Z.Label,{children:" Reservation Link "}),(0,g.jsx)(k.Z.Control,{readOnly:!0,defaultValue:n.reservation_url})]}),(0,g.jsxs)(k.Z.Group,{classname:"mb-3",children:[(0,g.jsx)(k.Z.Label,{children:" Password "}),(0,g.jsx)(k.Z.Control,{placeholder:"Password",onChange:function(e){return p(e.target.value)}})]})]})}),(0,g.jsx)(Z.Z.Footer,{children:(0,g.jsx)(d.Z,{onClick:function(e){var t,a;e.preventDefault(),o((t=n.id,a=u,function(){var e=(0,h.Z)(v().mark((function e(n,r){var s,i,o,c,d;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:f.aW}),s=r(),i=s.userLoginReducer.userInfo,o={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i.token)}},e.next=6,j().put("http://ec2-18-141-208-218.ap-southeast-1.compute.amazonaws.com:9090/api/reservation/update-reservation-password/reservation_id=".concat(t,"/"),{reservation_pin:a},o);case 6:c=e.sent,d=c.data,n({type:f.cZ,payload:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n({type:f.P4,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n,r){return e.apply(this,arguments)}}())),r(!1),i(!0)},children:"Update Password"})})]}))};var y=function(e){var n=e.reservation;return(0,g.jsxs)(Z.Z,(0,m.Z)((0,m.Z)({},e),{},{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(Z.Z.Header,{closeButton:!0,children:(0,g.jsx)(Z.Z.Title,{id:"contained-modal-title-vcenter",children:"Reservation Link"})}),(0,g.jsx)(Z.Z.Body,{children:(0,g.jsxs)(k.Z,{children:[(0,g.jsxs)(k.Z.Group,{classname:"mb-3",children:[(0,g.jsx)(k.Z.Label,{children:" Reservation Link "}),(0,g.jsx)(k.Z.Control,{readOnly:!0,defaultValue:n.reservation_url})]}),(0,g.jsxs)(k.Z.Group,{classname:"mb-3",children:[(0,g.jsx)(k.Z.Label,{children:" Password "}),(0,g.jsx)(k.Z.Control,{readOnly:!0,defaultValue:n.reservation_pin})]})]})}),(0,g.jsx)(Z.Z.Footer,{children:(0,g.jsx)(d.Z,{onClick:function(){navigator.clipboard.writeText("URL: ".concat(n.reservation_url,"\nReservation ID: ").concat(n.id,"\nPassword: ").concat(n.reservation_pin,"\n").concat(n.reservation_owner," is inviting you to join them at ").concat(n.Restaurant.restaurant_name," on ").concat(n.reservation_date," at ").concat(n.reservation_time))},children:"Copy Link"})})]}))},L=t.createRef();var b=function(){var e=(0,s.I0)(),n=(0,o.UO)(),r=(0,t.useState)(!1),l=(0,a.Z)(r,2),p=l[0],x=l[1],m=(0,t.useState)(!1),Z=(0,a.Z)(m,2),k=Z[0],b=Z[1],R=(0,t.useState)(!1),C=(0,a.Z)(R,2),_=C[0],N=C[1],P=(0,t.useState)(!1),z=(0,a.Z)(P,2),B=z[0],G=z[1],I=(0,s.v9)((function(e){return e.getConfirmedReservationReducer})),E=I.loading,S=I.error,D=I.reservation;return(0,t.useEffect)((function(){var r;e((r=n.id,function(){var e=(0,h.Z)(v().mark((function e(n,t){var a,s,i,o,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:f.aB}),a=t(),s=a.userLoginReducer.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,j().get("http://ec2-18-141-208-218.ap-southeast-1.compute.amazonaws.com:9090/api/reservation/get-reservation/reservation_id=".concat(r,"/"),i);case 6:o=e.sent,c=o.data,n({type:f.Nc,payload:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n({type:f.LL,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n,r){return e.apply(this,arguments)}}())),!0===B&&(G(!1),b(!0))}),[e,B]),(0,g.jsxs)(c.Z,{ref:L,className:"px-5",children:[(0,g.jsx)("h1",{children:" Reservation Confirmation "}),E?(0,g.jsx)("h1",{children:"Loading confirmed Reservation..."}):S?(0,g.jsx)("h1",{children:"Error Loading Reservations..."}):(0,g.jsx)("div",{className:" pt-5 row",children:D&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"col-6",children:[(0,g.jsx)("h3",{className:"pb-3",children:" Your Details "}),(0,g.jsx)("h5",{children:"Name"}),(0,g.jsx)("p",{children:D.reservation_owner}),(0,g.jsx)("h5",{children:"Reservation Date"}),(0,g.jsx)("p",{children:D.reservation_date}),(0,g.jsx)("h5",{children:"Number of Guests"}),(0,g.jsx)("p",{children:D.reservation_pax}),(0,g.jsx)("h5",{children:"Reservation Time"}),(0,g.jsx)("p",{children:D.reservation_time}),(0,g.jsx)(i.Link,{to:"/",children:(0,g.jsx)("div",{className:"d-grid gap-2",children:(0,g.jsx)(d.Z,{className:"mt-1",size:"md",children:"Go to home page"})})}),(0,g.jsx)("br",{}),(0,g.jsx)(i.Link,{to:"/preorder/".concat(D.pre_order_id),children:(0,g.jsx)("div",{className:"d-grid gap-2",children:(0,g.jsx)(d.Z,{variant:"success",className:"mb-3",size:"md",children:"I want to order"})})})]}),(0,g.jsxs)("div",{className:"col-6",children:[(0,g.jsx)(u(),{targetRef:L,filename:"reservation-confirmation.pdf",children:function(e){var n=e.toPdf;return(0,g.jsx)(d.Z,{onClick:n,children:"Generate Pdf"})}})," ",k?(0,g.jsx)(d.Z,{onClick:function(){return N(!0)},children:"Reservation Link"}):(0,g.jsx)(d.Z,{onClick:function(){return x(!0)},children:"Edit Reservation Link"}),(0,g.jsx)(w,{reservation:D,setEditLinkModal:x,setPasswordChange:G,show:p,onHide:function(){return x(!1)}}),(0,g.jsx)(y,{reservation:D,setLinkModal:N,show:_,onHide:function(){return N(!1)}})]})]})})]})};var R=function(){return(0,g.jsx)(b,{})}}}]);
//# sourceMappingURL=361.0ddb5db6.chunk.js.map