"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[968],{88968:function(e,a,s){s.r(a),s.d(a,{default:function(){return V}});var n=s(72791),t=s(70885),i=s(47022),r=s(28949),l=s(43504),o=s(16871),d=s(16030),c=s(46654),m=s(89743),u=s(2677),h=s(55705),x=s(76863),j=s(80184),p=x.Ry().shape({firstName:x.Z_().required("First Name Required"),lastName:x.Z_().required("Last Name Required"),email:x.Z_().email().required("Email Required"),contact:x.Z_().required("Contact Number Required").matches(/[0-9]{8}/,"Enter Valid Contact Number").max(8,"Enter Valid Contact Number")});var v=function(e){var a=e.userInfo,s=e.setReservationDate,n=e.setReservationTime,t=e.setNGuest,i=((0,d.I0)(),{firstName:a.first_name,lastName:a.last_name,email:a.email,contact:a.contact}),r=new Date;return r.setDate(r.getDate()+2),(0,j.jsxs)("div",{className:"p-5 shadow shadow-100 row",children:[(0,j.jsx)("h1",{className:"text-center",children:"Enter Your Reservation Details"}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-6 col-md-4",children:(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(c.Z.Label,{children:"Reservation Date"}),(0,j.jsx)(c.Z.Group,{children:(0,j.jsx)(c.Z.Control,{required:"required",type:"date",onChange:function(e){return s(e.target.value)},min:r.toISOString().split("T")[0]})})]})}),(0,j.jsx)("div",{className:"col-6 col-md-4",children:(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(c.Z.Label,{children:"Reservation Time"}),(0,j.jsx)(c.Z.Group,{children:(0,j.jsx)(c.Z.Control,{type:"time",min:"0900",onChange:function(e){return n(e.target.value)}})})]})}),(0,j.jsx)("div",{className:"col-6 col-md-4",children:(0,j.jsxs)(c.Z.Group,{children:[(0,j.jsx)(c.Z.Label,{children:"Number of Guests"}),(0,j.jsxs)(c.Z.Select,{onChange:function(e){return t(e.target.value)},children:[(0,j.jsx)("option",{children:"Select Number of Pax"}),(0,j.jsx)("option",{value:1,children:"1"}),(0,j.jsx)("option",{value:2,children:"2"}),(0,j.jsx)("option",{value:3,children:"3"}),(0,j.jsx)("option",{value:4,children:"4"}),(0,j.jsx)("option",{value:5,children:"5"}),(0,j.jsx)("option",{value:6,children:"6"}),(0,j.jsx)("option",{value:7,children:"7"}),(0,j.jsx)("option",{value:8,children:"8"}),(0,j.jsx)("option",{value:9,children:"9"}),(0,j.jsx)("option",{value:10,children:"10"})]})]})})]}),(0,j.jsx)(h.J9,{validationSchema:p,initialValues:i,children:function(e){var a=e.handleChange,s=e.values,n=e.touched,t=e.errors;return(0,j.jsxs)(c.Z,{noValidate:!0,children:[(0,j.jsxs)(m.Z,{xs:1,md:2,children:[(0,j.jsx)(u.Z,{children:(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik01",children:[(0,j.jsx)(c.Z.Label,{children:"First Name"}),(0,j.jsx)(c.Z.Control,{type:"text",name:"firstName",value:s.firstName,onChange:a,isInvalid:!!t.firstName,isValid:n.firstName&&!t.firstName,feedback:t.firstName,placeholder:i.firstName,disabled:!0}),t.firstName&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:t.firstName})]})}),(0,j.jsx)(u.Z,{children:(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik02",children:[(0,j.jsx)(c.Z.Label,{children:"Last Name"}),(0,j.jsx)(c.Z.Control,{type:"text",name:"lastName",value:s.lastName,onChange:a,isInvalid:!!t.lastName,isValid:n.lastName&&!t.lastName,feedback:t.lastName,placeholder:i.lastName,disabled:!0}),t.lastName&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:t.lastName})]})})]}),(0,j.jsxs)(m.Z,{xs:1,md:2,children:[(0,j.jsx)(u.Z,{children:(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik03",children:[(0,j.jsx)(c.Z.Label,{children:"Email address"}),(0,j.jsx)(c.Z.Control,{type:"email",name:"email",value:s.email,onChange:a,isInvalid:!!t.email,isValid:n.email&&!t.email,feedback:t.email,placeholder:i.email,disabled:!0}),t.email&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:t.email}),(0,j.jsx)(c.Z.Control.Feedback,{children:"Looks good!"})]})}),(0,j.jsx)(u.Z,{children:(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik04",children:[(0,j.jsx)(c.Z.Label,{children:"Contact Number"}),(0,j.jsx)(c.Z.Control,{type:"tel",name:"contact",value:s.contact,onChange:a,isInvalid:!!t.contact,isValid:n.contact&&!t.contact,feedback:t.contact,placeholder:i.contact,disabled:!0}),t.contact&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:t.contact}),(0,j.jsx)(c.Z.Control.Feedback,{children:"Looks good!"})]})})]})]})}})]})},f=s(43360),Z=s(44688),b={email:"",password:""},N=x.Ry().shape({email:x.Z_().email("Must be a valid email address").required("Email Required"),password:x.Z_().required("Password Required")});var y=function(){var e=(0,d.I0)(),a=((0,o.s0)(),(0,n.useState)(!1)),s=(0,t.Z)(a,2),i=s[0],r=s[1],l=function(){r(!i)};return(0,j.jsxs)("div",{className:"p-5 shadow shadow-100",children:[(0,j.jsx)("h1",{className:"text-center",children:"User Authentication"}),(0,j.jsx)(h.J9,{validationSchema:N,initialValues:b,onSubmit:function(a){e((0,Z.x)(a.email,a.password))},children:function(e){var a=e.handleSubmit,s=e.handleChange,n=e.values,t=e.touched,r=e.errors;return(0,j.jsxs)(c.Z,{noValidate:!0,onSubmit:a,children:[(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik01",children:[(0,j.jsx)(c.Z.Label,{children:"Email address"}),(0,j.jsx)(c.Z.Control,{type:"email",name:"email",value:n.email,onChange:s,isInvalid:!!r.email,isValid:t.email&&!r.email,feedback:r.email}),r.email&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:r.email}),(0,j.jsx)(c.Z.Control.Feedback,{children:"Looks good!"})]}),(0,j.jsxs)(c.Z.Group,{className:"mb-3",controlId:"validationFormik02",children:[(0,j.jsx)(c.Z.Label,{children:"Password"}),(0,j.jsx)(c.Z.Control,{type:i?"text":"password",name:"password",value:n.password,onChange:s,isInvalid:!!r.password,isValid:t.password&&!r.password,feedback:r.password}),r.password&&(0,j.jsx)(c.Z.Control.Feedback,{type:"invalid",children:r.password}),(0,j.jsx)(c.Z.Control.Feedback,{children:"Looks good!"})]}),(0,j.jsx)(c.Z.Group,{className:"mb-3",controlId:"formBasicCheckbox",onClick:l,children:(0,j.jsx)(c.Z.Check,{type:"checkbox",label:"Show Password"})}),(0,j.jsx)("div",{className:"d-grid gap-2",children:(0,j.jsx)(f.Z,{type:"submit",className:"btn btn-primary my-5",text:"Sign In",children:"Sign in"})})]})}})]})},C=s(25862),k=s(12576),w=s(66992),I=s(25593);var g=function(e){e.payment;var a=e.paid,s=e.setPaid,i=(0,n.useState)(!1),r=(0,t.Z)(i,2),l=(r[0],r[1],(0,n.useState)(!1)),o=(0,t.Z)(l,2),c=o[0],m=o[1];return(0,d.I0)(),(0,n.useEffect)((function(){a&&c||(window.paypal?m(!0):function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.paypal.com/sdk/js?client-id=AblsefRPw4Dp2V1_u2Dd6MY-IYJUe3OvtFXU0o5XDz-IKjsDC1MmHtguz4ExhBYMvlCtwekZLVZhxy8W&currency=USD",e.async=!0,e.onload=function(){m(!0)},document.body.appendChild(e)}())}),[a,c]),(0,j.jsx)("div",{className:"d-flex justify-content-end px-5",children:(0,j.jsx)(I.q,{amount:14.34,onSuccess:function(e){"COMPLETED"===e.status&&s(!a)},disabled:!a})})},R=s(15861),D=s(87757),S=s.n(D),L=s(74569),F=s.n(L),G=s(79742);var q=function(e){(0,o.s0)();var a=e.userInfo,s=e.reservationDate,i=e.reservationTime,r=e.nGuest,l=e.restaurantID,c=(0,n.useState)(!1),m=(0,t.Z)(c,2),u=m[0],h=m[1],x=(0,n.useState)(!1),p=(0,t.Z)(x,2),v=p[0],Z=p[1],b=(0,d.v9)((function(e){return e.createReservationReducer})).reservation,N="".concat(s," ").concat(i),y=(0,d.I0)();return(0,n.useEffect)((function(){u&&b&&(window.location.href="/post_confirmation/".concat(b.id))}),[u,b]),(0,j.jsxs)("div",{className:"p-5 shadow shadow-100 row",children:[(0,j.jsx)("h1",{className:"text-center",children:"Confirm Reservation"}),(0,j.jsxs)("div",{className:"pt-5 row",children:[(0,j.jsxs)("div",{className:"col-sm",children:[(0,j.jsx)("h4",{children:"Name"}),(0,j.jsx)("p",{children:a.first_name}),(0,j.jsx)("h4",{children:"Reservation Date"}),(0,j.jsx)("p",{children:s})]}),(0,j.jsxs)("div",{className:"col-sm",children:[(0,j.jsx)("h4",{children:"Number of Guests"}),(0,j.jsx)("p",{children:r}),(0,j.jsx)("h4",{children:"Reservation Time"}),(0,j.jsx)("p",{children:i})]}),(0,j.jsxs)("div",{className:"col-sm",children:[(0,j.jsx)(C.Z,{overlay:(0,j.jsx)(k.Z,{id:"tooltips",children:"A deposit of 20 SGD is required to secure your reservation."}),children:(0,j.jsx)("span",{className:"d-inline-block",children:(0,j.jsx)("div",{className:"d-flex justify-content-end px-5",children:(0,j.jsxs)(f.Z,{variant:"link",disabled:!0,style:{pointerEvents:"none"},children:["Deposit",(0,j.jsx)(w.gL9,{})]})})})}),(0,j.jsx)("br",{}),(0,j.jsx)(g,{setPaid:Z,paid:v})]})]}),v&&s&&i&&r?(0,j.jsx)(f.Z,{type:"submit",className:"my-3",onClick:function(e){var a,s,n;e.preventDefault(),y((a=l,s=N,n=r,function(){var e=(0,R.Z)(S().mark((function e(t,i){var r,l,o,d,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:G.Jh}),r=i(),l=r.userLoginReducer.userInfo,o={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=6,F().post("http://ec2-18-141-208-218.ap-southeast-1.compute.amazonaws.com:9090/api/reservation/create-reservation/",{restaurant_id:a,reservation_tyme:s,reservation_pax:n},o);case 6:d=e.sent,c=d.data,t({type:G.jv,payload:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:G.XU,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a,s){return e.apply(this,arguments)}}())),h(!0)},children:"Confirm Reservation"}):(0,j.jsx)(f.Z,{onClick:function(){alert("Please ensure all form fields are filled and deposit is paid!")},children:"Confirm Reservation"})]})};var E=function(){var e=(0,d.v9)((function(e){return e.userLoginReducer})).userInfo,a=(0,o.UO)(),s=(0,n.useState)(""),c=(0,t.Z)(s,2),m=c[0],u=c[1],h=(0,n.useState)(""),x=(0,t.Z)(h,2),p=x[0],f=x[1],Z=(0,n.useState)(0),b=(0,t.Z)(Z,2),N=b[0],C=b[1];return(0,j.jsxs)(i.Z,{className:"p-3",children:[(0,j.jsx)("div",{className:"py-3",children:(0,j.jsx)(l.Link,{to:"/restaurant/".concat(a.id),children:"Back"})}),(0,j.jsx)("h3",{children:"Complete your reservation"}),e?(0,j.jsxs)(r.Z,{defaultActiveKey:"1",alwaysOpen:!0,children:[(0,j.jsx)(r.Z.Item,{eventKey:"0",children:(0,j.jsx)("h2",{className:"accordion-header",children:(0,j.jsx)("button",{type:"button","aria-expanded":"false",disabled:!0,className:"accordion-button collapsed",children:"Authentication"})})}),(0,j.jsxs)(r.Z.Item,{eventKey:"1",children:[(0,j.jsx)(r.Z.Header,{children:"Details"}),(0,j.jsx)(r.Z.Body,{children:(0,j.jsx)(v,{userInfo:e,setReservationDate:u,setReservationTime:f,setNGuest:C})})]}),(0,j.jsxs)(r.Z.Item,{eventKey:"2",children:[(0,j.jsx)(r.Z.Header,{children:"Confirmation"}),(0,j.jsx)(r.Z.Body,{children:(0,j.jsx)(q,{userInfo:e,reservationDate:m,reservationTime:p,restaurantID:a.id,nGuest:N})})]})]}):(0,j.jsxs)(r.Z,{defaultActiveKey:"0",children:[(0,j.jsxs)(r.Z.Item,{eventKey:"0",children:[(0,j.jsx)(r.Z.Header,{children:"Authentication"}),(0,j.jsx)(r.Z.Body,{children:(0,j.jsx)(y,{})})]}),(0,j.jsx)(r.Z.Item,{eventKey:"1",children:(0,j.jsx)("h2",{className:"accordion-header",children:(0,j.jsx)("button",{type:"button","aria-expanded":"false",disabled:!0,className:"accordion-button collapsed",children:"Details"})})}),(0,j.jsx)(r.Z.Item,{eventKey:"2",children:(0,j.jsx)("h2",{className:"accordion-header",children:(0,j.jsx)("button",{type:"button","aria-expanded":"false",disabled:!0,className:"accordion-button collapsed",children:"Confirmation"})})})]})]})};var V=function(){return(0,j.jsx)(E,{})}}}]);
//# sourceMappingURL=968.ed81bc73.chunk.js.map